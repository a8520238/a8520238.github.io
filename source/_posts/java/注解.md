---
title: 注解
date: 2021-2-28
cover:
top_img:
categories: javaSE
tags: 
mathjax: true
katex: true
---
# 注解（Annotation）

## 1 什么是注解

- 注解不是程序本身，但可以被程序读取
- 注解中可以加入参数值
- 可以再包、类、方法、字段上使用
- 可以通过反射机制访问注解

## 2 内置注解

- @Override 声明重写方法
- @Deprecated 代表方法是过时的，不推荐程序员使用，但可以使用
- @SuppressWarnings("all") 镇压全部警告 //unchecked

## 3 元注解

元注解 ： 负责解释其他注解的注解
- @Target 用于描述注解的使用范围
- @Retention 表示在什么级别保存该注释信息，用于描述注解的生命周期 （SOURCE < CLASS < RUNTIME）
- @Document 说明该注解被包含在javadoc中,被修饰的注解类将被javadoc工具提取成文档
- @Inherited 说明子类可以继承父类中的该注解,被修饰的注解类将具有继承性


## 4 自定义注解

@interface自定义注解时，自动继承了java.lang.annotation.Annotation接口

注解定义方式
```
@Target(value=ElementType.METHOD)
@Rentention(value=RetentionPolicy.RUNTIME)
public  @interface Target() {
    //注解的参数：参数类型 + 参数名（），不是方法只是定义参数；
    String name();（default ""）//可以定义默认值，如果没有必须显示赋值
}
```
读取注解要通过反射

## 5 一个简单的例子

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
@Documented
@Inherited
public @interface MyAnno {
    String value() default "有注解";
}


@Data
@ToString
public class Person {
    @MyAnno
    private String stra;
    private String strb;
    private String strc;

    public Person(String str1,String str2,String str3){
        super();
        this.stra = str1;
        this.strb = str2;
        this.strc = str3;
    }

}

public class MyTest {
    public static void main(String[] args) {
        //初始化全都赋值无注解
        Person person = new Person("无注解","无注解","无注解");
        //解析注解
        doAnnoTest(person);
        System.out.println(person.toString());
    }

  private static void doAnnoTest(Object obj) {
        Class clazz = obj.getClass();
        Field[] declareFields = clazz.getDeclaredFields();
        for (Field field:declareFields) {
            //检查该字段是否使用了某个注解
            if(field.isAnnotationPresent(MyAnno.class)){
                MyAnno anno = field.getAnnotation(MyAnno.class);
                if(anno!=null){
                    String fieldName = field.getName();
                    try {
                        Method setMethod = clazz.getDeclaredMethod("set" + fieldName.substring(0, 1).toUpperCase() + fieldName.substring(1),String.class);
                        //获取注解的属性
                        String annoValue = anno.value();
                        //将注解的属性值赋给对应的属性
                        setMethod.invoke(obj,annoValue);
                    }catch (NoSuchMethodException e){
                        e.printStackTrace();
                    } catch (IllegalAccessException e) {
                        e.printStackTrace();
                    } catch (InvocationTargetException e) {
                        e.printStackTrace();
                    }

                }
            }

        }
    }

}
```
- 输出为 有注解 无注解 无注解