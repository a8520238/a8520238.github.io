---
title: 时间处理
date: 2021-2-28
cover:
top_img:
categories: javaSE
tags: 
mathjax: true
katex: true
---
# 1 SimpleDateFormat用法

1. SimpleDateFormat是线程不安全的类，一般不要定义为static变量，如果定义为static，必须加锁，或者使用DateUtils工具类。

```
// Date转String
Date data = new Date();
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String dataStr = sdf.format(data);
System.out.println(dataStr);

// String转Data
System.out.println(sdf.parse(dataStr));
```
2. 将当前计算机所处地区的时间转换为其他地区的时间，以转为美国洛杉矶为例子
```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
sdf.setTimeZone(TimeZone.getTimeZone("America/Los_Angeles"));
System.out.println(sdf.format(Calendar.getInstance().getTime()));

//在Java8中，直接使用以下代码即可输出美国洛杉矶的时间：
LocalDateTime now = LocalDateTime.now(ZoneId.of("America/Los_Angeles"));
System.out.println(now);
```

3. 如果是Java8应用，可以使用DateTimeFormatter代替SimpleDateFormat，这是一个线程安全的格式化工具类。

# 2 相关API

1. 检查闰年
- 直接使用LocalDate的isLeapYear即可判断是否闰年
```
LocalDate nowDate = LocalDate.now();
//判断闰年
boolean leapYear = nowDate.isLeapYear();
```
2. 计算两个日期之间的天数和月数
- 在Java8中可以用java.time.Period类来做计算
```
Period period = Period.between(LocalDate.of(2018, 1, 5),LocalDate.of(2018, 2, 5));
```